import type { SceneData } from '../../interface/Scene'
import {
  CoreCharacteristicEnum,
  SkillEnum,
  RollEnum,
  EffectType,
  CheckDifficulty,
  // ConditionType, // Removed as not used
} from '../../constant/enums'
import { GameFlag } from '../../constant/GameFlags'

export const scenes_181_200: SceneData = {
  '181': {
    id: '181',
    story:
      '几乎是巧合之下，你发现两块岩石之间有一道狭窄的通道通往悬崖之内。借着日光，你勉强能发现一片凹进去的石洞，那个男人无声无息地蹲在里面瞪着你。\n他低吼道：“你这混账，我还没被耍够吗？”不过，他现在看起来平静了一些。',
    options: [
      { type: 'goto', text: '进入他的避难所', goto: '191' },
      { type: 'goto', text: '不想冒险', goto: '160' },
    ],
  },
  '182': {
    id: '182',
    story:
      '你直起身来，阿博加斯特的眼中闪过警惕的神色，迅速化作炽烈的憎恨。他侧身贴近你的脸。\n“那你走吧。等到那个时候，记得我曾经给过你触碰永恒的机会。我不会再给你第二次.”\n他沿着东盘山路的方向大步离去了。\n在你返回莱德贝特的房子时，你觉得自己听到了一阵模糊的男人叫声，虚弱、绝望。但你没法断定声音的方向，而且你在阴暗的巷子里什么也看不见。',
    options: [{ type: 'goto', text: '继续', goto: '157' }],
  },
  '183': {
    id: '183',
    story:
      '你用尽全力砸向柱子。村民警觉地后退，但在发现你在做无用功以后，就放松了。他们把你逼到了教堂的墙边。你拼命地挥动棍子抵抗了几秒，但他们很快就压制住你，把铁棍从你手上夺走了。',
    options: [{ type: 'goto', text: '继续', goto: '108' }],
  },
  '184': {
    id: '184',
    story:
      '你被一本小开本、黑封面的奇怪诗集吸引了。它的封面写着《阿撒托斯及其他》，作者是爱德华·德比，1919年在波士顿出版。和其他的书不同，这本书你可以随身携带。\n德比的诗集需要研读约一星期才能完全掌握。如果你度过此次冒险，你可以阅读171得到关于它的更多信息。',
    options: [
      {
        type: 'goto',
        text: '继续',
        goto: '120',
        effects: [
          { type: EffectType.ADD_ITEM, target: '阿撒托斯及其他_from_184' },
        ],
      },
    ],
  },
  '185': {
    id: '185',
    story:
      '回忆起骑车的技能花了一点时间，但在第一个向东的转弯之后，烬头村外的道路一路向山下延伸。你听见头顶上方传来嘶吼和爆响，但你仍然拖着虚弱的身体集中精力保持平衡，不停地蹬着踏板。在整个村庄的恶意下，你已经有太多计划落空了。你头也不回地骑下去。\n二十分钟以后，你感觉没有被追赶的迹象，停在一片山坡的顶上喘口气。你向远处望去，抬头能看见烬头村。似乎整个村子已经化作火海，村子上方的浓烟聚集成灰暗的烟柱，数里之外都清晰可见——但如果这村庄真的和你见到的一样孤独，那么基本没有人能够及时施救。\n你就这样看着村子燃烧，大概停了五分钟。然后你重新蹬上自行车，向文明而行，向黎明而行。\n恭喜！你已经度过了这次冒险。你可以保留自己的角色卡，在其他的《克苏鲁的呼唤》冒险中使用它。如果你在技能左边的方框里打过勾，你可以从经历中得到提升它们的机会。\n【剧终】',
    options: [{ type: 'goto', text: '游戏结束', goto: 'END' }],
  },
  '186': {
    id: '186',
    story:
      '你踉踉跄跄地走到路边，大口喘着粗气。你的双脚发软，几乎要站立不住。你一边跑一边冒险回头瞟。熊好像改变了想法，放弃追击，正在走回林子里。你停下脚步，调整呼吸。\n如果你后背受了伤，你不能有效使用「急救」技能，特别是还有一头敌对的熊在附近。还要再等一等。',
    options: [{ type: 'goto', text: '继续', goto: '79' }],
  },
  '187': {
    id: '187',
    story:
      '隐蔽的阶梯似乎是很明了的解释。这个人可以爬上阶梯，上到烬头村去。查看悬崖之后，你发现你大概往回走了四十码，但你还能完全看见他。',
    options: [
      {
        type: 'check',
        text: '进行困难「侦查」检定',
        check: {
          details: {
            object: 'skill',
            subObject: SkillEnum.SPOT_HIDDEN,
            difficulty: CheckDifficulty.HARD,
          },
          onSuccessSceneId: '181',
          onFailureSceneId: '160',
          successText: '进行困难「侦查」检定（成功）',
          failureText: '放弃追逐（侦查失败）',
        },
      },
    ],
  },
  '188': {
    id: '188',
    story:
      '一个黑影突然从黑暗中穿出。它伸出手臂抱住阿博加斯特的咽喉，把他向后拽出了壁凹。他抓住那手臂，双脚向虚空踢去。你看见长刀在月色下闪烁的寒光。',
    options: [
      {
        type: 'check',
        text: '进行「闪避」检定',
        check: {
          details: {
            object: 'skill',
            subObject: SkillEnum.DODGE,
            difficulty: CheckDifficulty.NORMAL,
          },
          onSuccessSceneId: '195',
          onFailureSceneId: '203',
          successText: '进行「闪避」检定（成功）',
          failureText: '进行「闪避」检定（失败）',
        },
      },
    ],
  },
  '189': {
    id: '189',
    story:
      '你向柱子上弯曲得最厉害的部位猛然砸去。你听到断裂的声音，于是收回武器，又砸了一次。\n柱子被击垮，喀嚓一声断裂了。你的头顶开始发出雷鸣一般的巨响。你因喜悦而呆住了一瞬间，但追逐你的人不约而同地瞪大眼睛，恐惧地仰视。很快，天花板就坠落下来。', // Corrected story
    options: [
      {
        type: 'check',
        text: '进行“幸运”检定',
        check: {
          details: {
            object: 'characteristic',
            subObject: RollEnum.LUCK,
            difficulty: CheckDifficulty.NORMAL,
          },
          onSuccessSceneId: '204',
          onFailureSceneId: '196',
          successText: '进行“幸运”检定（成功）',
          failureText: '进行“幸运”检定（失败）',
        },
      },
    ],
  },
  '190': {
    id: '190',
    story:
      '村会堂的大门哗啦一声打开，一群村民涌了进来，很快将你团团包围。一个穿西服打领带的中年绅士站在他们身后。\n他慢悠悠地说道：“哦，原来您在这里。我们还一直纳闷您到哪里去了呢.”他轻轻一挥手，村民就把你捉住了。',
    options: [{ type: 'goto', text: '继续', goto: '108' }],
  },
  '191': {
    id: '191',
    story:
      '你小心翼翼地迈步，挤进嶙峋的岩层之间，钻进了这个隐蔽的小洞，头顶几乎就要撞上低矮的洞顶了。那男人背靠岩壁，盯着你钻进来。然后他拉下了头巾。\n进行一次“理智”检定。如果你失败了，失去1点理智值。',
    options: [
      {
        type: 'check',
        text: '进行“理智”检定',
        check: {
          details: {
            object: 'characteristic',
            subObject: CoreCharacteristicEnum.POW, // Sanity
            difficulty: CheckDifficulty.NORMAL,
          },
          onSuccessSceneId: '199',
          onFailureSceneId: '199', // Both lead to 199
          successText: '理智检定成功',
          failureText: '理智检定失败',
          onFailureEffects: [{ type: EffectType.CHANGE_SANITY, value: '-1' }],
        },
      },
    ],
  },
  '192': {
    id: '192',
    story:
      '你已经厌倦自己拖动沉重的行李了。希望西拉斯能修好长途车，这样你就能继续旅途。他虽然脾气够坏，但这个老司机看起来相当了解自己的车。你停下来看了看表——还早了二十分钟——然后转过了最后一个街角。\n长途车已经不见了。\n你放下行李开始四处搜索，走下坡道，又走上坡道；转过街角，又转回街角，一直不停地寻找。\n在村头，你也追着漫长的盘山公路找过了。八点钟到了又过去，但长途车连个影子都见不到。\n一个过路的村民看见了你的包。\n“你等公车？我听他天刚亮就走了。他应该三四天以后才回来。要是你没处去，梅·莱德贝特那里有房间可以住.”他向你抬了抬帽沿，漫步走进了村子。\n你低声诅咒着西拉斯。他也许是去找零部件了。但是你怀疑，这只老狐狸是故意把你扔在这里的。',
    options: [{ type: 'goto', text: '继续', goto: '218' }],
  },
  '193': {
    id: '193',
    story:
      '你的膝盖一软，身体瘫倒在路边几步远的地方。鲜血充满了你的口腔。你翻身的时候，视线正撞到熊的脸，模糊而重叠。它露出利齿，向你扑来——\n你失去了意识，被熊撕碎了。可能性并没有站在你这一边。\n为何不重新尝试这次冒险呢？\n【剧终】',
    options: [{ type: 'goto', text: '游戏结束', goto: 'END' }],
  },
  '194': {
    id: '194',
    story:
      '西拉斯打开了引擎舱盖，把头伸了进去。这块烧热的铁疙瘩砰砰作响，咝咝有声。他把各个部位都戳了几下，然后伸出头来，擦了擦额头，额头上沾上了漆黑的油污。\n“我不知道是哪的问题。也许是油压不行。也许是刚才摔了一下的时候什么东西摔坏了。得两个气缸都凉下来才能修。天也晚了......我觉得我们应该在这里过夜.”他一边用破布擦手一边说。\n你四周的影子都已经很长，空气中也有了寒意。你因为旅途而感到浑身酸痛，在这摇摇晃晃的长途车里过一夜可一点也不好受。西拉斯看出了你的沮丧。\n“这里叫烬头村。别的村子要走好几里。我每星期才来两次。但这里的人都是好人。梅·莱德贝特有间空房。她会让你留宿的。顺着这条巷子，右转，左边第一间房.”\n他挠了挠脸颊，又把头探进发动机舱，往地上吐了口痰。\n“明天早上八点回来找我，再看看车的情况.”',
    options: [
      { type: 'goto', text: '寻找梅·莱德贝特的房子', goto: '267' },
      { type: 'goto', text: '问西拉斯他在哪里过夜', goto: '251' },
      { type: 'goto', text: '向西拉斯怀疑这次故障', goto: '257' },
    ],
  },
  '195': {
    id: '195',
    story:
      '另一个黑影手持某种钝器向你砸来。你一把将它推开，跳起身来寻找更适合防御的位置。\n液体冒出的声音吸引了你的注意力。阿博加斯特用手捂着脖子。血从手指缝里、从他的嘴里淌下来。攻击他的人再次挥刀刺去。沾着血渍的刀刃切破了阿博加斯特紧紧按住颈部的手腕。现在你能看见攻击者的脸，他低着头，脸上涂着焦油一类的东西，眼中燃烧着仇恨。阿博加斯特挡开攻击者，蹒跚转身，更多的血液顺着他的手臂奔流而出。意志力支撑着这个不成人形的老头。\n他站直身体，抬起一只手。',
    options: [
      {
        type: 'check',
        text: '进行“理智”检定',
        check: {
          details: {
            object: 'characteristic',
            subObject: CoreCharacteristicEnum.POW, // Sanity
            difficulty: CheckDifficulty.NORMAL,
          },
          onSuccessSceneId: '210',
          onFailureSceneId: '217',
          successText: '进行“理智”检定（成功）',
          failureText: '进行“理智”检定（失败）',
        },
      },
    ],
  },
  '196': {
    id: '196',
    story:
      '庞大的重量将你猛然拍到石地板上。你的脖子啪嚓一声折断，头颅也被压得粉碎。\n你被坍塌的教堂屋顶砸死了！这计划虽然大胆，但风险太大了。为何不重新尝试这次冒险呢？\n【剧终】',
    options: [{ type: 'goto', text: '游戏结束', goto: 'END' }],
  },
  '197': {
    id: '197',
    story:
      '你试着把“召唤天之火”的字词记到脑海里。\n根据说明，它只有在“群星归位时”才能成功。书上有图表来计算日期，但你现在没有时间计算这个。\n整篇咒语需要大概二十秒来朗读，需要一心一意集中精力，而且因为距离过于遥远，对施法者的精力消耗也非常巨大。\n你发现了一个秘密。如果情形适宜，这段文字可以提供你施法的机会。到那时，如果你想尝试这个仪式，在你所在的条目号上加40，前往对应的条目。',
    options: [
      {
        type: 'goto',
        text: '继续',
        goto: '207',
        effects: [
          {
            type: EffectType.SET_FLAG,
            gameFlag: GameFlag.LEARNED_SPELL_SUMMON_FIRE_FROM_SKY,
            flagValue: true,
          },
        ],
      },
    ],
  },
  '198': {
    id: '198',
    story:
      '你感到，而不是看到，星辰从你头上的天顶坠落。你虽然被绑在燃烧的铁链上，却能号令群星。\n你每消耗1点魔法值，就有10%的概率成功。比如你消耗了6点魔法值，你要进行一次成功率60%的检定。检定结果为96～100必然失败。\n如果你施放“号令天之火”成功，前往209。如果你失败了，前往65。',
    // This is a special check based on MP spent.
    // TODO: Implement this custom check logic. For now, simplified.
    options: [
      { type: 'goto', text: '（假设施法成功）', goto: '209' },
      { type: 'goto', text: '（假设施法失败）', goto: '65' },
    ],
  },
  '199': {
    id: '199',
    story:
      '男人的脸上有些东西：他从下颌到右眼眶的一带健康但苍白，看上去上了年纪。但左半边则被刺眼的伤疤完全铺满了。他的眼皮耷拉着，上面覆盖着熔融的血肉；半边鼻子也被扯开，留下一个敞口的坑洞。这个丑陋不堪的人用他仅剩的好眼审视着你。\n“我叫阿博加斯特。威拉德·阿博加斯特。猜我不用问你是怎么来的烬头村.”',
    options: [
      { type: 'goto', text: '坚称自己是来参加节日的', goto: '206' },
      { type: 'goto', text: '承认西拉斯把自己撂到这里了', goto: '214' },
    ],
  },
  '200': {
    id: '200',
    story:
      '阿博加斯特并不在约定见面的地点。你等了他十分钟，但他还是没有出现。你骂了一句老怪物，转头返回梅的房子。\n“嘘——.”\n一扇门里面探出一只手，抓住了你的胳膊。你借着星光瞅到那只剩半张脸的面孔，不由得跳了起来。\n“他们有人过来了，”他轻声说道。“看着点儿。和我来.”',
    options: [{ type: 'goto', text: '继续', goto: '169' }],
  },
}
