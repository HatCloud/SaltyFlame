import type { SceneData } from '../../interface/Scene'
import {
  CheckObjectKey,
  EffectType,
  CheckDifficulty,
  // ConditionType, // Add if needed
} from '../../constant/enums'

export const scenes_221_240: SceneData = {
  '221': {
    id: '221',
    story:
      '阿博加斯特用尖锐的目光睨视着你。“你来找我的，嗯？”他抬头望向洞顶。“谁跟你说的我？我不介意，没关系。其实，他们害怕我知道的东西。他们从来不敢正面接触我。可不要落得和老阿博加斯特一样的结局.”他咯咯笑起来。高亢的笑声从浮肿溃烂的嘴唇中发出，显得格外丑陋怪诞。\n可是他的眼神突然变得像铁一样犀利。\n“烬头村四十年以前就死了。被火焰毁灭，被星星吞噬。古老的山坡被地狱之火洗了个干净。新生命来到烧焦的土地上，一切周而复始。阿布纳基人知道.”\n阿博加斯特用衣袖抹了下鼻子。“只是没发生过这种事罢了。火焰被送走了。必须的牺牲推迟了一年，又一年。现在上面的那些家伙——”他用枯瘦的手指向上戳了戳洞顶——“觉得自己是村庄的拯救者。妄想他们可以打败旧日支配者！Iä！Cthugha！”他摇晃着脑袋。“在诡异的万古中他们的小命不过是一眨眼的事.”\n他的目光里燃烧着狂暴的智慧。但你觉得阿博加斯特可能疯得不轻。只要他情绪有一点变化，他可很容易就能抓起崖壁上松脱的岩石，用它把你的脑壳打得粉碎。',
    options: [
      { type: 'goto', text: '问阿博加斯特有关阿布纳基人的事', goto: '227' },
      { type: 'goto', text: '问阿博加斯特有关旧日支配者的事', goto: '237' },
      { type: 'goto', text: '问阿博加斯特有关烬头村村民的事', goto: '245' },
      { type: 'goto', text: '趁还来得及赶快离开', goto: '253' },
    ],
  },
  '222': {
    id: '222',
    story:
      '你爬到半截，手从长满青苔的树枝上滑脱，跌落在地。肺里的空气直冲出你的喉咙。\n受到1点伤害。如果你因此而HP归零，前往13。否则你可以一边留意脆弱的树枝一边继续攀爬。',
    options: [
      {
        type: 'goto',
        text: '（若HP > 0）继续攀爬',
        goto: '228',
        effects: [{ type: EffectType.CHANGE_HP, value: '-1' }],
        // TODO: HP check for goto 13. This might need a condition or specific reducer logic.
        // condition: { type: ConditionType.HP_CHECK, comparisonValue: 0, comparisonOperator: 'gt' }
      },
      // TODO: Add option for HP <= 0 leading to scene 13.
      // { type: 'goto', text: '(若HP <= 0) 前往13', goto: '13', effects: [{type: EffectType.CHANGE_HP, value: '-1'}] },
    ],
  },
  '223': {
    id: '223',
    story:
      '你走上一片小山的山顶，歇息片刻确认自己的方位。夕阳西下，在烬头村的后面落山，所以你要朝——\n当你望向几里外的村庄时，能看到灯塔在燃烧；橘黄色的光芒照亮了夜空，也照亮了四周的树林。翻腾的烟雾直冲天际，群星点缀在深邃的午夜蓝上，就成了闪耀的天篷。\n你对着那里看了几分钟，然后转身回去，继续你的旅程。有一瞬间给你留下了奇怪的印象；你觉得当你转身时，村子上方有一颗星星在移动。但那只意味着疯狂。\n恭喜！你已经度过了这次冒险。你可以保留自己的角色卡，在其他的《克苏鲁的呼唤》冒险中使用它。如果你在技能左边的方框里打过勾，你可以从经历中得到提升它们的机会。\n【剧终】',
    options: [{ type: 'goto', text: '游戏结束', goto: 'END' }],
  },
  '224': {
    id: '224',
    story:
      '你的眼皮在打架，不管怎么保持清醒你都很快就睡着了。\n你又一次梦见壁炉里的火焰，这里是辉煌的小小剧院，上演着火光的小小戏剧。这火焰似乎没有燃料，几乎是悬浮在空中的。片刻之后，它们来到床边，围到你身旁，把房间填满飘忽不定的色彩：蓝、黄、红、紫。它们在你身上跳动，在你身旁跳动。小小的火舌刷过你的皮肉......',
    options: [{ type: 'goto', text: '继续', goto: '26' }],
  },
  '225': {
    id: '225',
    story:
      '你检查了这个挂锁。它很老旧，也不是特别坚固。附近有很多金属碎片可以当作简易开锁器使用。但你真的会开锁吗？',
    options: [
      {
        type: 'check',
        text: '进行“锁匠”检定',
        check: {
          details: {
            object: 'skill',
            subObject: CheckObjectKey.LOCKSMITH,
            difficulty: CheckDifficulty.NORMAL, // TODO: Implement doubling skill value logic
          },
          onSuccessSceneId: '244',
          onFailureSceneId: '238',
          successText: '进行“锁匠”检定（成功，打勾）',
          failureText: '进行“锁匠”检定（失败）',
          onSuccessEffects: [
            {
              type: EffectType.MARK_SKILL_SUCCESS,
              target: CheckObjectKey.LOCKSMITH,
            },
          ],
        },
      },
    ],
  },
  '226': {
    id: '226',
    story:
      '你说道，你要到圣玛丽医院去担任实习医生。这是所顶尖的医院，会接触到各种各样的病人和病例；这使你不仅激动，还有一点点不安。不过，就像你的一位老教授说过的那样，“只有实践才能让人成为专家.”\n“医生，哈？人们总是需要这些家伙.”\n你莫非在西拉斯的声音中听出了不信任的语气？或者只是你多虑了？\n你的「信用评级」技能是30%。\n你的本职技能是：「急救」，「外语（拉丁文）」，「医学」，「心理学」，「科学（生物学）」，「科学（药学）」，你还可以选择除了「克苏鲁神话」以外的其他任意两项技能作为学术专长或个人专长。将以下数值分配到各项本职技能当中，写到旁边的大方格里：70%，60%，60%，50%，50%，50%，40%，40%。分配时忽略调查员角色卡上已写出的初始值。',
    options: [{ type: 'goto', text: '分配技能并继续', goto: '128' }],
  },
  '227': {
    id: '227',
    story:
      '他皱皱眉：“阿布纳基人？他们了解这片土地，爱护这片土地。他们在指定的时间里和谐地生活在这里。空气、大地、水流和火焰。他们将每天的黎明都当成恩赐，走路都轻声慢步。但我们来了，我们结果了他们。他们的时代结束了。现在我们的也要结束.”\n阿博加斯特用手撩了撩头发。他左边的头发缺了一大片，只有伤疤留在上面。他直起身来。',
    options: [{ type: 'goto', text: '继续', goto: '259' }],
  },
  '228': {
    id: '228',
    story:
      '你小心翼翼地能爬到见到的最宽阔的树枝上。上面不是很舒服，但在这么高的位置至少你能感觉安全一些。\n夜幕慢慢降临身边。树林发出窸窸窣窣的声响，好像活过来了一样：近处的刨抓声、远处的鸟鸣声，还有树叶轻轻摇动的沙沙声。虽然你已经听天由命，准备好过一个漫长乏味的不眠之夜，但几个小时以后你还是打起了呵欠。你解开腰带把自己的衣服和树枝系在一起，尽量固定住自己的身体，然后闭上了眼睛。',
    options: [{ type: 'goto', text: '继续', goto: '246' }],
  },
  '229': {
    id: '229',
    story:
      '你在阴翳之中逃亡，枝叶拍打着你的脸颊。你身后亮起提灯的光线，在树干之间摇曳。但你已经无牵无挂、不顾一切，毫不费力就甩掉了他们。\n最后，你看着他们消失在树林的另一侧。你听到远远传来模糊的骂声，尔后他们就一去不返。',
    options: [{ type: 'goto', text: '继续', goto: '223' }],
  },
  '230': {
    id: '230',
    story:
      '强大的睡意向你袭来。你不停地眨着眼睛，翻身坐起来，试图思考自己的处境。烬头村的一切东西好像都在阻止你离开。也许唯一的答案是明天天一亮就主动出击，走得越远越好。以后你随时都能回来取走你的财物，就算这些财物都没了，也没有什么是不可替代、特别值钱的东西。\n房间另一边咯吱响了一下，吸引了你的注意力。\n门把手在慢慢地、悄悄地转动。',
    options: [
      { type: 'goto', text: '抓住门把手，把门拉开', goto: '248' },
      { type: 'goto', text: '假装睡下', goto: '254' },
    ],
  },
  '231': {
    id: '231',
    story:
      '烟雾飘动了一下，你看到村民们披着披风，脸上涂着荒诞的彩绘，眼睁睁看着你被牺牲。这是些诱骗你、玩弄你、谋杀你的小人。你命令群星送去你的愤怒。\n突然之间如同有万千光点在他们当中散开，从天而降的高热将它们照得透亮，遥远恒星的光辉让它们闪闪发光。村民们的脸上现出惊奇而喜悦的神情，抬起手去触碰光芒——但是，光点碰到什么，什么就开始燃烧。\n恐慌在人群中播散。他们边跑边号叫，皮肉烧得焦黑，从骨骼上剥落；迈向死亡的步伐在地面上刻下灰烬的印痕。没有人不在燃烧。无情的星辰在他们之中穿行，他们无人生还。\n火焰侵蚀着你的身体，你痛苦地颤抖。但你死之前至少做了件欣慰的小事：烬头村永远也不会烧死更多的受害者了。\n你在灯塔上被烧死了。但你用整个村子的人为你做了陪葬！\n【剧终】',
    options: [{ type: 'goto', text: '游戏结束', goto: 'END' }],
  },
  '232': {
    id: '232',
    story:
      '你检查了这间工坊。它的结构完整无缺，但多年的日晒雨淋让木材变得脆弱；你只要猛然冲击就可能把它打破。但你必须手脚利落，如果重复尝试引人注意，就得不偿失了。',
    options: [
      {
        type: 'check',
        text: '进行“力量”检定',
        check: {
          details: {
            object: 'characteristic',
            subObject: CheckObjectKey.STR,
            difficulty: CheckDifficulty.NORMAL,
          },
          onSuccessSceneId: '244',
          onFailureSceneId: '238',
          successText: '进行“力量”检定（成功）',
          failureText: '进行“力量”检定（失败）',
        },
      },
    ],
  },
  '233': {
    // This scene was already present
    id: '233',
    story:
      '司机把他的烟卷弹进排水沟，走进了车厢。发动机咳嗽着开始运转。你也上了车，非常庆幸自己至少在旅程开始时是唯一的乘客。你怀着复杂的感情，隔着窗户看着那些早已看厌的街道缓缓退远，慢慢滑到你身后。最初几分钟你还能看见山坡顶上教堂的尖顶，但道路开始下坡，很快连尖顶也看不到了。\n阿卡姆将是你的新家。你会到那里，开始新的生活。',
    info: '你在每个属性值的右侧会看见两个小方格。将每个属性值的一半舍去小数，填在右上角的小格里。再将每个属性值的五分之一也舍去小数，填在右下角的小格里。我们后面会用到这些数值。\n如果你正在使用交互PDF版本的调查员角色卡，你会发现PDF已经为你计算完成了！\n在属性的下面几行你会看到记录理智值和魔法值的示数轨。你的初始理智值等于你的意志值，初始的魔法值等于你刚刚算出意志值的五分之一。\n在示数轨上圈出对应的数值。',
    options: [{ type: 'goto', text: '继续', goto: '134' }],
  },
  '234': {
    id: '234',
    story:
      '又一声嗥叫划破黑暗。它和你进入第一片树林时听到的怪异叫声相类，但这次还混入了刺耳的低音，令你直打哆嗦。它似乎在接近。',
    options: [
      { type: 'goto', text: '爬上树暂避一宿', goto: '208' },
      { type: 'goto', text: '继续前行', goto: '215' },
    ],
  },
  '235': {
    id: '235',
    story:
      '一个车夫下车时出了状况，你对着另一个车夫摆好架势。他是个上年纪的男人，作出以命相搏的眼神。\n处理近身战斗时，使用快速开始规则的第14～16页（规则书第102～111页）。你需要先阅读第8页（规则书第33页）来查询自己的伤害加值。\n参战者中“敏捷”最高的最先行动。你和车夫每个战斗轮各可进行一个动作。工匠每向你攻击一次，你都可以选择反击（投掷「格斗(斗殴)」）或者闪避（投掷「闪避」）。战斗技能检定是对抗检定：谁的成功度高，谁得手。\n车夫的“敏捷”为31，格斗(斗殴)技能值为30%（半值15%/五分之一值6%），耐久值为9。每轮投掷一次1D6。如果投出单数，他会攻击；如果投出双数，他会闪避你的攻击。他的「闪避」技能为15%（半值7%/五分之一值3%）。他手持一支短棍，能造成1D6点伤害。\n如果你带着小刀或类似的武器，你每次攻击成功都会造成1D4点加上伤害加值点数的伤害。如果你赤手空拳，伤害是1D3点加上伤害加值点数。',
    // Combat. If player reduces HP to 4 or less, goto 241. If player HP is 0, goto 247.
    // TODO: Implement combat.
    options: [
      { type: 'goto', text: '（战斗后，假设车夫HP <= 4）', goto: '241' },
      { type: 'goto', text: '（战斗后，假设你HP <= 0）', goto: '247' },
    ],
  },
  '236': {
    id: '236',
    story:
      '阿博加斯特伤口的血流已经减缓，成了涓涓细流。他的呼吸既浅浮又短促，你明白他已经没救了。随着生命力的流逝，他的眼皮微微翕动，最终还是合上了。你向他默哀片刻。可是，攻击者还有可能回来。这村子里又有谁值得信任呢？',
    options: [
      { type: 'goto', text: '带梅来这里', goto: '242' },
      {
        type: 'goto',
        text: '返回莱德贝特的房子，但对这件事闭口不提',
        goto: '157',
      },
    ],
  },
  '237': {
    id: '237',
    story:
      '阿博加斯特被疤痕覆盖的脸上浮现出病态的狂喜笑容。\n“旧日支配者？风行者、克苏鲁、伏行混沌。你，和其他那些人一样，地上爬来爬去的蚊蠓而已，你觉得你做的事很重要，是吗？你活着就是全部意义了.”他摇摇头。“我们不过是尘土浮沫，风一吹就飘起来，太阳一照就不见了。你什么也不是。我们都什么也不是.”\n他沉默起来。正当你以为他的说教要结束时，他又兴奋起来。\n“在这里你可以离活火焰最近。不是金斯波特人痴迷的那种喷火的绿焰柱。我是说它比地球上所有活物都早！开天辟地时是它点燃了虚空！它有无穷的燃料，无限的耐心。它会烧尽我们所有人！”\n阿博加斯特用手撩了撩头发。他左边的头发缺了一大片，只有伤疤留在上面。他直起身来。\n你可以在你的「克苏鲁神话」技能上永久增加2点。',
    options: [
      {
        type: 'goto',
        text: '继续',
        goto: '259',
        effects: [
          {
            type: EffectType.SET_FLAG,
            gameFlag: 'FLAG_INCREASE_CTHULHU_MYTHOS_2',
            flagValue: true,
          },
        ],
      },
    ],
  },
  '238': {
    id: '238',
    story:
      '你从门口连退几步，沮丧着注视着它。嘎吱嘎吱的声音打断了你，有一个人影投射到附近的墙上。有人过来了。你换个方向溜走了。',
    options: [{ type: 'goto', text: '继续', goto: '120' }],
  },
  '239': {
    id: '239',
    story:
      '你说道，你的职业是记者，靠着在本地报纸上投送的几篇自由稿件获得了《阿卡姆公报》的稳定职位。远离了无趣味的社会专栏和异想天开的故事，绝对是令人欣慰的事！你晓得，《公报》从密斯卡托尼克大学研究员们的最新成果，到本地酒囊饭袋们做出的龌龊丑行，几乎无所不包。\n不管怎样，这都将是值得你为之全身心投入的工作。\n“写文的？给报纸？”西拉斯显得很困惑，就好像他认为那些故事都是自己凭空出现的一样。\n你的「信用评级」技能是20%。\n你的本职技能是：「艺术/手艺（摄影）」，「历史」，「图书馆使用」，「母语」，「心理学」，还有「魅惑」、「话术」、「恐吓」、「说服」四项中其中一项。你还可以选择除了「克苏鲁神话」以外的其他任意两项技能作为个人专长。\n将以下数值分配到各项本职技能当中，写到旁边的大方格里：70%，60%，60%，50%，50%，50%，40%，40%。分配时忽略调查员角色卡上已写出的初始值。',
    options: [{ type: 'goto', text: '分配技能并继续', goto: '128' }],
  },
  '240': {
    id: '240',
    story:
      '你听到身后的路上传来什么声音。是沉闷的喀嚓声——可能是枯枝坠落的声音。你停下脚步，但声音并没有再次响起。你往回走了几步，沿路望去，但什么也看不到。\n你可以在「聆听」技能左边的小方框里打勾。',
    options: [
      {
        type: 'goto',
        text: '继续',
        goto: '234',
        effects: [
          {
            type: EffectType.MARK_SKILL_SUCCESS,
            target: CheckObjectKey.LISTEN,
          },
        ],
      },
    ],
  },
}
